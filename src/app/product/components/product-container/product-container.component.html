<app-back-btn></app-back-btn>
<ng-container *ngIf="variants$ | async as productTypes">
  <ng-container *ngIf="productTypes[selectedIdx] as product">
    <app-swiper
      [sliders]="product.productVariantImages"
      [sliderHeight]="'22rem'"
      [intervalBySeconds]="0"
    ></app-swiper>
    <div class="price-section">
      <!-- 第一行 -->
      <div class="now-price">
        {{ product.price | currency : "CNY" }}
      </div>
      <div class="list-price">
        {{ product.listPrice | currency : "CNY" }}
      </div>
      <div class="sales-count">
        {{ product.product.priceDesc }}
      </div>
      <!-- 第二行 -->
      <div class="title">
        {{ product.name }}
      </div>
      <!-- 第三行 -->
      <div class="coupon">
        <span
          appTag
          [tagRadius]="'5px'"
          [tagPadding]="'2px 10px'"
          [tagSize]="'1rem'"
          [tagBgColor]="'#e02f29'"
          [tagColor]="'#fff'"
          >返现</span
        >
        <span class="desc">店铺内消费满39元返2元</span>
      </div>
      <!-- 第四行 -->
      <div class="guarantee">
        <span>全场包邮</span>
        <span>•</span>
        <span>7天退换</span>
        <span>•</span>
        <span>48小时发货</span>
        <span>•</span>
        <span>假一赔十</span>
      </div>
      <!-- 第五行 -->
      <app-team-buying-list
        class="team-buying-list"
        [groupOrders]="groupOrders"
      ></app-team-buying-list>
    </div>
    <div class="toolbar">
      <div class="icon-button">
        <img src="/assets/icons/more.png" alt="" />
        <div>更多</div>
      </div>
      <div class="icon-button">
        <img src="/assets/icons/favorite.png" alt="" />
        <div>收藏</div>
      </div>
      <div class="icon-button">
        <img src="/assets/icons/customer-service.png" alt="" />
        <div>客服</div>
      </div>
      <div class="direct-buy" (click)="handleDirectBuy(productVariants)">
        <div>
          {{ product.listPrice | currency : "CNY" }}
        </div>
        <div>直接购买</div>
      </div>
      <div class="group-buy" (click)="handleGroupBuy(productVariants)">
        <div>{{ product.price | currency : "CNY" }}</div>
        <div>发起拼单</div>
      </div>
    </div>
  </ng-container>
</ng-container>
